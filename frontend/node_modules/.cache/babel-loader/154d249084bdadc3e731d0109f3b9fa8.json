{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useCallback, useRef } from 'react';\nexport const useHttp = () => {\n  _s();\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [messages, setMessages] = useState(null);\n  const dataRef = useRef(null); // Use useRef to store the data value\n\n  const sendRequest = useCallback(async (url = 'https://localhost:5001/todo/', method = 'GET', body = null, headers = {}) => {\n    setLoading(true);\n    try {\n      if (body) {\n        if (headers['Content-Type'] !== 'multipart/form-data; charset=utf-8; boundary=\"--WebKitBoundary\"') {\n          body = JSON.stringify(body);\n        }\n        if (headers['Content-Type'] === undefined) {\n          headers['Content-Type'] = 'application/json';\n        }\n      }\n      const response = await fetch(url, {\n        method,\n        body,\n        headers\n      });\n      const jsonData = await response.json();\n      dataRef.current = jsonData; // Store the data value in the re\n      setLoading(false);\n      if (!response.ok) {\n        setMessages(jsonData.errors);\n        throw new Error(jsonData.message || 'Something went wrong...');\n      }\n      setError(null);\n      return jsonData;\n    } catch (e) {\n      setLoading(false);\n      setError(e.message);\n      throw e;\n    }\n  }, []);\n  const clearError = useCallback(() => setError(null), []);\n  const clearMessages = useCallback(() => setMessages(null), []);\n  return {\n    loading,\n    sendRequest,\n    error,\n    data: dataRef.current,\n    // Return the data from the ref\n    clearError,\n    clearMessages,\n    messages\n  };\n};\n_s(useHttp, \"5DOqexh2gVNFpoEJMc1evfzvr4I=\");","map":{"version":3,"names":["useState","useCallback","useRef","useHttp","_s","error","setError","loading","setLoading","messages","setMessages","dataRef","sendRequest","url","method","body","headers","JSON","stringify","undefined","response","fetch","jsonData","json","current","ok","errors","Error","message","e","clearError","clearMessages","data"],"sources":["C:/Users/TEQ/Desktop/fullstack-dotnet-react/frontend/src/hooks/useHttp.js"],"sourcesContent":["import { useState, useCallback, useRef } from 'react';\n\nexport const useHttp = () => {\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [messages, setMessages] = useState(null);\n  const dataRef = useRef(null); // Use useRef to store the data value\n\n  const sendRequest = useCallback(async (url = 'https://localhost:5001/todo/',  method = 'GET', body = null, headers = {}) => {\n    setLoading(true);\n    try {\n      if (body) {\n        if (headers['Content-Type'] !== 'multipart/form-data; charset=utf-8; boundary=\"--WebKitBoundary\"') {\n          body = JSON.stringify(body);\n        }\n        if (headers['Content-Type'] === undefined) {\n          headers['Content-Type'] = 'application/json'\n        }\n      }\n    \n      const response = await fetch(url, { method, body, headers });\n      const jsonData = await response.json();\n\n      dataRef.current = jsonData; // Store the data value in the re\n      setLoading(false);\n\n      if (!response.ok) {\n        setMessages(jsonData.errors);\n        throw new Error(jsonData.message || 'Something went wrong...');\n      }\n\n      setError(null);\n      return jsonData;\n    } catch (e) {\n      setLoading(false);\n      setError(e.message);\n      throw e;\n    }\n  }, []);\n\n\n\n  const clearError = useCallback(() => setError(null), []);\n  const clearMessages = useCallback(() => setMessages(null), []);\n\n  return {\n    loading,\n    sendRequest,\n    error,\n    data: dataRef.current, // Return the data from the ref\n    clearError,\n    clearMessages,\n    messages\n  };\n};\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,WAAW,EAAEC,MAAM,QAAQ,OAAO;AAErD,OAAO,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACO,OAAO,EAAEC,UAAU,CAAC,GAAGR,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACS,QAAQ,EAAEC,WAAW,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAMW,OAAO,GAAGT,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;;EAE9B,MAAMU,WAAW,GAAGX,WAAW,CAAC,OAAOY,GAAG,GAAG,8BAA8B,EAAGC,MAAM,GAAG,KAAK,EAAEC,IAAI,GAAG,IAAI,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;IAC1HR,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,IAAIO,IAAI,EAAE;QACR,IAAIC,OAAO,CAAC,cAAc,CAAC,KAAK,iEAAiE,EAAE;UACjGD,IAAI,GAAGE,IAAI,CAACC,SAAS,CAACH,IAAI,CAAC;QAC7B;QACA,IAAIC,OAAO,CAAC,cAAc,CAAC,KAAKG,SAAS,EAAE;UACzCH,OAAO,CAAC,cAAc,CAAC,GAAG,kBAAkB;QAC9C;MACF;MAEA,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAACR,GAAG,EAAE;QAAEC,MAAM;QAAEC,IAAI;QAAEC;MAAQ,CAAC,CAAC;MAC5D,MAAMM,QAAQ,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;MAEtCZ,OAAO,CAACa,OAAO,GAAGF,QAAQ,CAAC,CAAC;MAC5Bd,UAAU,CAAC,KAAK,CAAC;MAEjB,IAAI,CAACY,QAAQ,CAACK,EAAE,EAAE;QAChBf,WAAW,CAACY,QAAQ,CAACI,MAAM,CAAC;QAC5B,MAAM,IAAIC,KAAK,CAACL,QAAQ,CAACM,OAAO,IAAI,yBAAyB,CAAC;MAChE;MAEAtB,QAAQ,CAAC,IAAI,CAAC;MACd,OAAOgB,QAAQ;IACjB,CAAC,CAAC,OAAOO,CAAC,EAAE;MACVrB,UAAU,CAAC,KAAK,CAAC;MACjBF,QAAQ,CAACuB,CAAC,CAACD,OAAO,CAAC;MACnB,MAAMC,CAAC;IACT;EACF,CAAC,EAAE,EAAE,CAAC;EAIN,MAAMC,UAAU,GAAG7B,WAAW,CAAC,MAAMK,QAAQ,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC;EACxD,MAAMyB,aAAa,GAAG9B,WAAW,CAAC,MAAMS,WAAW,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC;EAE9D,OAAO;IACLH,OAAO;IACPK,WAAW;IACXP,KAAK;IACL2B,IAAI,EAAErB,OAAO,CAACa,OAAO;IAAE;IACvBM,UAAU;IACVC,aAAa;IACbtB;EACF,CAAC;AACH,CAAC;AAACL,EAAA,CApDWD,OAAO"},"metadata":{},"sourceType":"module"}