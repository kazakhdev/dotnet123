{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useCallback, useEffect, useRef } from 'react';\nexport const useHttp = () => {\n  _s();\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [messages, setMessages] = useState(null);\n  const dataRef = useRef(null); // Use useRef to store the data value\n\n  const sendRequest = useCallback(async (url, method = 'GET', body = null, headers = {}) => {\n    setLoading(true);\n    try {\n      if (body) {\n        if (headers['Content-Type'] !== 'multipart/form-data; charset=utf-8; boundary=\"--WebKitBoundary\"') {\n          body = JSON.stringify(body);\n        }\n        if (headers['Content-Type'] === undefined) {\n          headers['Content-Type'] = 'application/json';\n        }\n      }\n      url = 'https://localhost:5001/todo/';\n      const response = await sendRequest(url, {\n        method,\n        body,\n        headers\n      });\n      const jsonData = await response.json();\n      dataRef.current = jsonData; // Store the data value in the re\n      setLoading(false);\n      if (!response.ok) {\n        setMessages(jsonData.errors);\n        throw new Error(jsonData.message || 'Something went wrong...');\n      }\n      setError(null);\n      return jsonData;\n    } catch (e) {\n      setLoading(false);\n      setError(e.message);\n      throw e;\n    }\n  }, []);\n  useEffect(() => {\n    let isMounted = true;\n    if (isMounted) {\n      sendRequest();\n    }\n    return () => {\n      isMounted = false;\n    };\n  }, [sendRequest]);\n  const clearError = useCallback(() => setError(null), []);\n  const clearMessages = useCallback(() => setMessages(null), []);\n  return {\n    loading,\n    sendRequest,\n    error,\n    data: dataRef.current,\n    // Return the data from the ref\n    clearError,\n    clearMessages,\n    messages\n  };\n};\n_s(useHttp, \"ZV9D07FJi+dUWTweDFAP4XY5v6M=\");","map":{"version":3,"names":["useState","useCallback","useEffect","useRef","useHttp","_s","error","setError","loading","setLoading","messages","setMessages","dataRef","sendRequest","url","method","body","headers","JSON","stringify","undefined","response","jsonData","json","current","ok","errors","Error","message","e","isMounted","clearError","clearMessages","data"],"sources":["C:/Users/TEQ/Desktop/fullstack-dotnet-react/frontend/src/hooks/useHttp.js"],"sourcesContent":["import { useState, useCallback, useEffect, useRef } from 'react';\n\nexport const useHttp = () => {\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [messages, setMessages] = useState(null);\n  const dataRef = useRef(null); // Use useRef to store the data value\n\n  const sendRequest = useCallback(async (url, method = 'GET', body = null, headers = {}) => {\n    setLoading(true);\n    try {\n      if (body) {\n        if (headers['Content-Type'] !== 'multipart/form-data; charset=utf-8; boundary=\"--WebKitBoundary\"') {\n          body = JSON.stringify(body);\n        }\n        if (headers['Content-Type'] === undefined) {\n          headers['Content-Type'] = 'application/json'\n        }\n      }\n      url = 'https://localhost:5001/todo/'\n      const response = await sendRequest(url, { method, body, headers });\n      const jsonData = await response.json();\n\n      dataRef.current = jsonData; // Store the data value in the re\n      setLoading(false);\n\n      if (!response.ok) {\n        setMessages(jsonData.errors);\n        throw new Error(jsonData.message || 'Something went wrong...');\n      }\n\n      setError(null);\n      return jsonData;\n    } catch (e) {\n      setLoading(false);\n      setError(e.message);\n      throw e;\n    }\n  }, []);\n  useEffect(() => {\n    let isMounted = true;\n\n    if (isMounted) {\n      sendRequest();\n    }\n\n    return () => {\n      isMounted = false;\n    };\n  }, [sendRequest]);\n\n\n\n  const clearError = useCallback(() => setError(null), []);\n  const clearMessages = useCallback(() => setMessages(null), []);\n\n  return {\n    loading,\n    sendRequest,\n    error,\n    data: dataRef.current, // Return the data from the ref\n    clearError,\n    clearMessages,\n    messages\n  };\n};\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,WAAW,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAEhE,OAAO,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGP,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACQ,OAAO,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACU,QAAQ,EAAEC,WAAW,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAMY,OAAO,GAAGT,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;;EAE9B,MAAMU,WAAW,GAAGZ,WAAW,CAAC,OAAOa,GAAG,EAAEC,MAAM,GAAG,KAAK,EAAEC,IAAI,GAAG,IAAI,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;IACxFR,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,IAAIO,IAAI,EAAE;QACR,IAAIC,OAAO,CAAC,cAAc,CAAC,KAAK,iEAAiE,EAAE;UACjGD,IAAI,GAAGE,IAAI,CAACC,SAAS,CAACH,IAAI,CAAC;QAC7B;QACA,IAAIC,OAAO,CAAC,cAAc,CAAC,KAAKG,SAAS,EAAE;UACzCH,OAAO,CAAC,cAAc,CAAC,GAAG,kBAAkB;QAC9C;MACF;MACAH,GAAG,GAAG,8BAA8B;MACpC,MAAMO,QAAQ,GAAG,MAAMR,WAAW,CAACC,GAAG,EAAE;QAAEC,MAAM;QAAEC,IAAI;QAAEC;MAAQ,CAAC,CAAC;MAClE,MAAMK,QAAQ,GAAG,MAAMD,QAAQ,CAACE,IAAI,CAAC,CAAC;MAEtCX,OAAO,CAACY,OAAO,GAAGF,QAAQ,CAAC,CAAC;MAC5Bb,UAAU,CAAC,KAAK,CAAC;MAEjB,IAAI,CAACY,QAAQ,CAACI,EAAE,EAAE;QAChBd,WAAW,CAACW,QAAQ,CAACI,MAAM,CAAC;QAC5B,MAAM,IAAIC,KAAK,CAACL,QAAQ,CAACM,OAAO,IAAI,yBAAyB,CAAC;MAChE;MAEArB,QAAQ,CAAC,IAAI,CAAC;MACd,OAAOe,QAAQ;IACjB,CAAC,CAAC,OAAOO,CAAC,EAAE;MACVpB,UAAU,CAAC,KAAK,CAAC;MACjBF,QAAQ,CAACsB,CAAC,CAACD,OAAO,CAAC;MACnB,MAAMC,CAAC;IACT;EACF,CAAC,EAAE,EAAE,CAAC;EACN3B,SAAS,CAAC,MAAM;IACd,IAAI4B,SAAS,GAAG,IAAI;IAEpB,IAAIA,SAAS,EAAE;MACbjB,WAAW,CAAC,CAAC;IACf;IAEA,OAAO,MAAM;MACXiB,SAAS,GAAG,KAAK;IACnB,CAAC;EACH,CAAC,EAAE,CAACjB,WAAW,CAAC,CAAC;EAIjB,MAAMkB,UAAU,GAAG9B,WAAW,CAAC,MAAMM,QAAQ,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC;EACxD,MAAMyB,aAAa,GAAG/B,WAAW,CAAC,MAAMU,WAAW,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC;EAE9D,OAAO;IACLH,OAAO;IACPK,WAAW;IACXP,KAAK;IACL2B,IAAI,EAAErB,OAAO,CAACY,OAAO;IAAE;IACvBO,UAAU;IACVC,aAAa;IACbtB;EACF,CAAC;AACH,CAAC;AAACL,EAAA,CA/DWD,OAAO"},"metadata":{},"sourceType":"module"}